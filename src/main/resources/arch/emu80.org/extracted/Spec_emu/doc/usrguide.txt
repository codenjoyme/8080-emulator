Глава III

              Руководство пользователя эмулятора

    Для начала  работы  с системой  требуется  запустить файл
SPECIAL.EXE.  Если конфигурация системы соответствует требуе-
мой,  эмулятор будет готов к работе.  При этом на экране воз-
никают четыре окна:

    - окно эмулируемой ЭВМ -  в нем  отображаются  результаты
      работы программ эмулируемой ЭВМ;
    - окно процессора,  отображающее текущее состояние микро-
      процессора К580ВМ80А;
    - окно дизассемблированного текста;
    - окно состояния главного системного порта FF05h.

    При  запуске  исполнимого файла  без параметров  эмулятор
входит  в режим эмуляции ПЭВМ "Специалист",  т.е. запускается
на выполнение подпрограмма начальной загрузки эмулируемой ЭВМ;
если же при запуске  указать  в качестве  параметра  ключевое
слово "debug",  система переходит  в режим  пошагового испол-
нения  команд эмулируемой ЭВМ (в режим отладки).

   Интегрированная среда эмулятора предоставляет пользователю
следующие возможности:

    - Просмотр  и  редактирование  содержимого ОЗУ  (любой из
      трех страниц),  портов устройств ввода-вывода и регист-
      ров микропроцессора К580ВМ80А.

    - Работа  в режиме  эмулируемого компьютера  "Специалист"
      (окно  "Экран  эмулируемого  компьютера")  с поддержкой
      всех возможностей данного ПК.

    - Работа  с двоичными файлами,  содержащими  машинный код
      МП  К580ВМ80А  и  хранящимися  на  внешних  накопителях
      MS DOS (чтение, запись и выполнение).

    - Трассировка программ,  хранящихся в ОЗУ  (как с обходом
      подпрограмм, так и с заходом в них).

    - Дизассемблирование  двоичных файлов  и фрагментов ОЗУ и
      ПЗУ.

    - Изменение опций (цвета, звук) интегрированной среды.

    - Начальная загрузка эмулируемого компьютера.

    - Получение справки о программе и ее создателях.

	- Выход из системы.


    Работа с эмулятором

    Большинство функций системы  доступно через главное меню.
Оно вызывается на экран по нажатию клавиши F1 в режиме отлад-
ки (так как в режиме эмуляции вся клавиатура IBM PC,  за иск-
лючением клавиши ScrollLock,  отображается на клавиатуру эму-
лируемой ЭВМ).  Ниже  перечислены  пункты и подменю  главного
меню:

    - Файлы - работа с внешними файлами

        - Путь		- задание рабочего каталога
        - Прочитать	- прочитать  файл  из  рабочего  каталога
        - Записать	- записать фрагмент ОЗУ на диск в рабочий
                          каталог в виде двоичного файла

    - Регистры		- изменение  текущего содержимого регист-
                          ров микропроцессора К580ВМ80А
 
    - Память		- просмотр  и редактирование  содержимого
                          ОЗУ  ПЭВМ "Специалист"  (в шестнадцати-
                          ричном либо текстовом формате)

    - Сброс	        - очистка ОЗУ и начальная установка реги-
                          стров (имитация холодного старта эмули-
                          руемой ЭВМ)

    - Опции             - изменение параметров системы

       	- Системные цвета       - выбор палитры для системных
                                  цветов
            - Палитра 1	        - выбор палитры 1
            - Палитра 2	        - выбор палитры 2
            - Палитра 3	        - выбор палитры 3

	- Эмуляция звука        - разрешить/запретить подачу
                                  звуковых сигналов эмулиру-
                                  емой ЭВМ
            - Включить
            - Отключить

Эмулятор обрабатывает нажатия следующих управляющих клавиш:

   - В режиме пошагового исполнения (отладки):

     F1 (Меню)      - вызов основного меню на экран

     F2 (Шаг)       - выполнение команды, на которую указыва-
                      ет регистр счетчика команд (регистр РС).
                      Если текущая команда  является командой
                      вызова подпрограммы, происходит переход
                      на первую команду подпрограммы

     F3 (Процедура) - выполнение команды, на которую указыва-
                      ет регистр счетчика команд (регистр РС).
                      Если текущая команда  является командой
                      вызова  подпрограммы,  эта подпрограмма
                      выполняется без трассировки; после воз-
                      врата из подпрограммы режим трассировки
                      возобновляется
     Scroll Lock
     (Запустить)	- переход в режим эмуляции

	 F9 (Справка)	- получение справки о времени создания
                      программы и ее авторах

     F10 (Выход)	- выход из среды эмулятора

    Таким образом, в режиме отладки эмулятор позволяет:

        - осуществлять пошаговое исполнение программ эмулиру-
          емой ЭВМ с просмотром их ассемблерного кода
        - изменять содержимое регистров эмулируемого процес-
          сора
        - записывать на диск и считывать с диска фрагменты
          ОЗУ эмулируемой ЭВМ
        - редактировать ОЗУ эмулируемой ЭВМ.


   - В режиме эмулируемого компьютера:

     Scroll Lock
     (Запустить)    - переход в режим пошагового исполнения

     Вся остальная клавиатура IBM PC в этом режиме  отобража-
     ется на клавиатуру  ПЭВМ "Специалист",  т.е.  нажатия на
     клавиши транслируются  и заносятся в соответствующую об-
     ласть памяти эмулируемой ПЭВМ. Таким образом,  работа  с
     эмулятором  в режиме эмуляции сводится  к работе с прог-
     раммами эмулируемой ЭВМ в окне эмуляции. По нажатию кла-
     виши ScrollLock эмулятор переходит в режим пошагового
     исполнения (режим отладки).


    Работа с редактором памяти

    При входе в редактор  (выбором пункта "Память"  основного
меню системы)  на экране появляется окно редактора,  где ото-
бражается содержимое текущей страницы ОЗУ в шестнадцатиричном
и текстовом представлении.

    С помощью  клавиш,  описанных  ниже,  пользователь  может
перемещаться по текущей странице ОЗУ, изменять ее содержимое,
а также переключаться на другие страницы. Смена текущей стра-
ницы в редакторе памяти не оказывает влияния на текущую стра-
ницу ОЗУ эмулируемой ЭВМ.

    Следует отметить, что в эмулируемой ЭВМ область адресного
пространства C000h - FFFFh является общей для всех трех стра-
ниц, и поэтому все изменения, вносимые в эту область в какой-
либо странице, будут продублированы в двух оставшихся.

     Редактор памяти обрабатывает следующие управляющие
клавиши:

     Клавиши управления   - перемещение по текущей странице
     курсором		        ОЗУ (с прокруткой)

     Ctrl+<Влево>       - переход к следующему байту в памяти
                          (в шестнадцатиричном режиме)

     Ctrl+<Вправо>      - переход к предыдущему байту в памяти
                          (в шестнадцатиричном режиме)

     Home               - переход к концу текущей строки
     End                - переход к началу текущей строки

     Ctrl+Home          - переход в левый верхний угол экрана
     Ctrl+End           - переход в правый нижний угол экрана

     PageUp             - смещение по памяти на страницу вверх
     PageDn             - смещение по памяти на страницу вниз

     Ctrl+PageUp	    - переход на начало текущей страницы
                          ОЗУ (на адрес 0000h)
     Ctrl+PageDn        - переход в конец текущей страницы
                          ОЗУ

     Tab                - переключение между шестнадцатиричным
                          и текстовым форматами представления
                          памяти

     F1                 - вызов меню для смены текущей стра-
                          ницы ОЗУ

     Esc                - выход из редактора памяти

     В текстовом режиме нажатие любой другой клавиши приводит
     к записи ее ASCII-кода в текущую ячейку памяти.  В шест-
     надцатиричном режиме с той же целью необходимо использо-
     вать клавиши '0'..'9' и 'A'..'F'.

    Меню  редактора  памяти  используется  для  смены текущей
страницы ОЗУ. Это меню содержит следующие пункты:

     - Основная              - перейти  к работе  в  основной
                               странице ОЗУ
     - 1-я дополнительная    - перейти к работе  в первой до-
                               полнительной странице ОЗУ
     - 2-я дополнительная    - перейти к работе во второй до-
                               полнительной странице ОЗУ

     Смена текущей страницы в редакторе памяти никак не отра-
жается на текущей странице эмулируемой ЭВМ.


