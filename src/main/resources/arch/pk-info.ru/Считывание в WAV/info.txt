# https://web.archive.org/web/20170318064757fw_/http://pk-info.ru/howtowav.html

Считывание в WAV с кассеты и последующее распознование в бинарник
(для ПК "Специалист").

1. Предварительная настройка
Если нет желания крутить головку магнитофона, оставьте как есть, сигнал со многих кассет я вообще снимал со входа наушников на переносном кассетном магнитофоне, и игрался с эквалайзером на нём же, громкость выходного сигнала (с наушников) при этом ставил на 23 db - 30 db. При условии, что у вас рабочий магнитофон с линейным выходом, с которого загружается запись в реальный компьютер, и если требуется - и вы готовы подкрутить головку для считывания записи, - подстройте запись, проверьте считывание на реале.

Если подзабыли, как звучит реальная запись для "Специалиста" без существенных искажений и на хорошо сохранившемся участке плёнки, скачайте этот файл - http://pk-info.ru/UPLOAD/igroteka_6_(start)_original.zip (9 Mb)

2.Запись в WAV
Для записи я использую старую версию Gold Wave Editor Pro, новые версии здесь - http://www.wav-editor.com/superezwaveeditor/index.html подойдёт любой условно-бесплатный, либо бесплатный редактор звука.
Нас интересует только функция записи с линейного входа, без обработки, как есть. Если в редакторе, либо на звуковой карте, есть фильтры обработки записи на лету, их необходимо отключить.

Параметры записи устанавливаем как:
44kHz, Stereo, 16bit

Уровень громкости записи лучше установить примерно на 70%-80% (в пределах -11 dB ... -3 dB), завышенное значение может внести дополнительное искажение в запись, как и сильно заниженное (такие записи довольно непросто восстановить). Запись необходима "как есть" на кассете, чтобы с ней можно было работать в дальнейшем.

Получившийся файл с кассеты, лучше пожать во FLAC - http://flac.sourceforge.net , никаких MP3/OGG и прочих кодировщиков с потерей звука.

Если не требуется дальнейшее сохранение записи в бинарном виде, последующие шаги можно пропустить.

3. Обработка записи
Для обработки использую Adobe Audition, с собственными FFT фильтрами, обработка сигнала была настроена по нескольким эталонным записям с кассет (распознав несколько сот файлов, в том числе не своих, с уверенностью могу утверждать, что вытащить можно почти всё, головку крутить не обязательно). Фильтры могу выложить, но никак не найду куда они сохранились...

Файл режится на несколько кусков, согласно кол-ву программ на кассете, обычно сохраняется левый канал, он и идёт для перевода в бинарник. Иногда, запись производилась и на правый канал (при неверно подстроенной головке), при Моно же записи бывает и так, что один из каналов лучше сохранился, - поэтому всегда необходимо сохранять в формате Стерео - 2 канала, как на кассете.

4. Сохранение в формате .RKS
Для перевода звука в бинарный формат, я использую утилиту Shoorick'a - http://shoorick.ho.ua/spec/wav2spec.0.2.3.1.zip

Обрабатывать лучше файл формата WAV: 44kHz, Mono, 16bit.

Для этой утилиты, необходимо удалить в начале записи весь "мусор", запись должна начинатся с самого сигнала - начала программы, удалить необходимо и весь "мусор" в конце.

По умолчанию, утилита пытается самостоятельно определить константу скорости записи. По стандарту Специалист'а, скорость по умолчанию должна быть 23, либо в пределах 22-24. Если автоматически определяется неверно (перед этим надо посмотреть на сам файл и если на глаз всё хорошо, попытаться его загрузить в эмулятор), то константу скорости записи указываем вручную. Минимум надо добиться - распознование заголовка записи с именем программы, максимум - распознование всей программы.

Параметры командной строки:
wav2spec -dконстантна входной.wav бинарник.rks
-d0 -- автоопределние константы скорости
-dnn -- константна скорости записи вручную

Если считывание не получается без ошибок, то играемся с записью в Adobe Audition и пытаемся добиться считывания в бинарнике.

Из-за особенностей эмуляции, ни каждая запись в WAV может успешно считаться в эмуляторе, но может быть успешно переведенна в бинарник и впоследствии без ошибок загружена в эмулятор.

Для "хитрых" записей с защитой от копирования, а также со считыванием по сбросу (например записи сборников Игротека от кооп.Старт), придётся сохранять только в WAV и добиваться корректной загрузки в эмуляторах, поскольку весь "эффект" считывания (в частности анимация загрузки) в бинарном виде не полностью поддерживается через эмуляторы. Исходник таких файлов с кассеты, должен быть максимально правильным.

На данный момент, считывания из WAV поддерживают эмуляторы: EMU, и M.E.S.S.

Дополнительные вопросы, можно уточнить на форуме: http://zx.pk.ru/forumdisplay.php?f=57



Болтаевский А.И.
© 2013
boltaevsky@inbox.ru
http://pk-info.ru