0 CLS0:PRINTTAB(15)"..................................."
1 PRINTTAB(15)": (C) 1992. K R A S N O Y A R S K :"
2 PRINTTAB(15)":    /*/B A I/*/  -  PRODUCTION   :"
3 PRINTTAB(15)":                                 :"
4 PRINTTAB(15)":  #############################  :"
5 PRINTTAB(15)":  # GAMES PROGRAM BY *SOKOBAN*#  :"
6 PRINTTAB(15)":  #############################  :"
7 PRINTTAB(15)":                                 :"
8 PRINTTAB(15)":.................................:":PRINT:PRINT:PRINT
9 PRINTTAB(15)"++ ИНСТРУКЦИЯ ПО ПРОХОЖДЕНИЮ ИГРЫ ++"
10 PRINT"##############################################################
11 PRINT"#      ВЫ РАБОТАЕТЕ ГРУЗЧИКОМ НА ЗАВОДЕ И ВАША ЗАДАЧА        #
12 PRINT"#     В ЦЕХАХ ЗАВОДА ОТНЕСТИ ВСЕ КОНТЕЙНЕРЫ НА ПРЕДНА-       #
13 PRINT"#     ЗНАЧЕННОЕ ДЛЯ НИХ МЕСТО <>. КОНТЕЙНЕРЫ ВЫ МОЖЕТЕ       #
14 PRINT"#     ТОЛЬКО ТОЛКАТЬ И НЕ БОЛЬШЕ ОДНОГО. ПРИ БЛАГОПОЛУ       #
15 PRINT"#     ЧНОМ ЗАВЕРШЕНИИ РАБОТЫ, ВЫ ПОЛУЧАЕТЕ ТО ЖЕ САМОЕ       #
16 PRINT"#     ЗАДАНИЕ В СЛЕДУЮЩЕМ ЦЕХЕ. ИГРА ЗАВЕРШАЕТСЯ, КОГ-       #
17 PRINT"#     ДА БОЛЬШЕ НЕТ РАБОТЫ В ЦЕХАХ Т.Е. ВСЕ КОНТЕЙНЕРЫ       #
18 PRINT"#     ПОСТАВЛЕНЫ НА МЕСТО.                                   #
19 PRINT"##############################################################
20 IF PEEK(-3)>248 THEN 20
21 DIM A(19,19)
26 
27 
28 
30 CLS1:FORI=1TO2:PLOT267+I,105,2:LINE267+I,230-I:LINE383,230-I:GOSUB34
31 NEXT:PLOT240,76,3:LINE240,86:LINE383,86:LINE383,76:LINE240,76
32 N=N+1:CUR69,229:PRINT"SOKOBAN, ";N;" SHOP"
33 FORI=137TO245:PLOTI,229,3:LINEI,238:NEXT:GOTO40
34 LINE383,105+I:LINE267,105+I:RETURN
40 PLOT271,107,5:LINE383,227
45 FORI=1TO19
50 FORJ=1TO19
60 READA(J,I)
70 IFA(J,I)=1THENCUR6*J-1,220-9*I:PRINT"<>"
80 IFA(J,I)=2THENCUR6*J-1,220-9*I:PRINT"[]":
90 IFA(J,I)=3THENCUR6*J-1,220-9*I:PRINT"##":
100 IFA(J,I)=4THENCUR6*J-1,220-9*I:PRINT"ПП":
110 NEXTJ:NEXTI
120 READX
130 READY
140 CUR135,202:PRINT"/\ - UP ":
150 CUR135,184:PRINT"\/ - DOWN"
160 CUR135,166:PRINT"-> - LEFT"
170 CUR135,148:PRINT"<- - RIGHT"
171 CUR135,130:PRINT"A - NEXT SHOP"
172 CUR135,112:PRINT"SPACE - END GAME"
173 CUR135,220:PRINT" * C O N T R O L * "
174 
175 
176 
180 CURX*6-1,220-9*Y:PRINT"X ":
185 POKE-28687,5:POKE-28686,4:S=USR(-16016):S=USR(-16016)
190 A=USR(7358):IFA=255THENS=USR(-16016):S=USR(-16016):GOTO190
200 CUR120,77:PRINT"                       "
210 IFA=97THEN30
220 IFA=25THENX1=X:Y1=Y-1:GOTO280
230 IFA=26THENX1=X:Y1=Y+1:GOTO280
240 IFA=8THENX1=X-1:Y1=Y:GOTO280
250 IFA=24THENX1=X+1:Y1=Y:GOTO280
260 IFA=32THEN275
270 GOTO180
275 FORI=50TO1STEP-.1:POKE-28687,I:POKE-28686,1:S=USR(-16016)
276 NEXT:STOP
280 
290 IFA(X1,Y1)<>0THEN340
300 
310 IFA(X,Y)=1THENCURX*6-1,220-9*Y:PRINT"<>"
320 IFA(X,Y)=0THENCURX*6-1,220-9*Y:PRINT"  "
330 X=X1:Y=Y1:GOTO180:
340 IFA(X1,Y1)=1THEN300
350 
360 IFA(X1,Y1)=4THEN180:
370 
380 X2=X1-X:Y2=Y1-Y:X2=X+2*X2:Y2=Y+2*Y2:
390 IFA(X2,Y2)<>0THEN530:
400 IFA(X,Y)=0THENCURX*6-1,220-9*Y:PRINT"  "
410 IFA(X,Y)=1THENCURX*6-1,220-9*Y:PRINT"<>"
420 X=X1:Y=Y1:A(X2,Y2)=A(X2,Y2)+2:A(X,Y)=A(X,Y)-2
430 IFA(X2,Y2)=2THENCURX2*6-1,220-9*Y2:PRINT"[]":GOTO180
440 IFA(X2,Y2)=3THENCURX2*6-1,220-9*Y2:PRINT"##"
450 
460 FORI=1TO19
470 FORJ=1TO19
480 IFA(J,I)=2THEN180
490 NEXTJ
500 NEXTI
510 
515 FORI=1TO95:POKE-28687,I:POKE-28686,2:S=USR(-16016):NEXT
516 FORI=94TO1STEP-.5:POKE-28686,1:POKE-28687,I:S=USR(-16016)
517 NEXT
520 GOTO30
530 IFA(X2,Y2)=1THEN400
540 CUR120,77:PRINT"ПЕРЕДВИЖЕНИЕ НЕВОЗМОЖНО"
550 GOTO180
555 POKE-28687,255:POKE-28686,50:S=USR(-16016):RETURN
600 
610 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
620 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
630 DATA4,4,4,4,4,4,4,0,0,0,4,4,4,4,4,4,4,4,4
640 DATA4,4,4,4,4,4,4,2,0,0,4,4,4,4,4,4,4,4,4
650 DATA4,4,4,4,4,4,4,0,0,2,4,4,4,4,4,4,4,4,4
660 DATA4,4,4,4,0,0,0,2,0,2,0,4,4,4,4,4,4,4,4
670 DATA4,4,4,4,0,4,4,0,4,4,0,4,4,4,4,4,4,4,4
680 DATA4,0,0,0,0,4,4,0,4,4,0,4,4,4,4,4,4,4,4
690 DATA4,0,0,0,0,4,4,0,4,4,0,4,4,0,0,1,1,4,4
700 DATA4,0,2,0,0,0,0,2,0,0,0,0,0,0,0,1,1,4,4
710 DATA4,4,4,4,4,4,4,0,4,4,0,4,4,0,0,1,1,4,4
720 DATA4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4
730 DATA4,4,4,4,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4
740 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
750 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
760 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
770 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
780 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
790 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
800 DATA12,12
810 
820 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
830 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
840 DATA4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4
850 DATA4,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0,4
860 DATA4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4
870 DATA4,4,0,0,4,4,4,4,0,0,4,4,4,0,0,0,0,4,4
880 DATA4,4,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,4,4
890 DATA4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4
900 DATA4,4,1,1,0,0,0,4,4,4,4,4,4,0,0,0,1,4,4
910 DATA4,4,1,1,0,0,0,0,4,4,4,4,4,0,0,0,1,4,4
920 DATA4,4,1,1,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4
930 DATA4,4,1,0,4,4,4,4,4,4,0,0,0,0,4,4,4,4,4
940 DATA4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4
950 DATA4,4,4,4,4,4,4,4,4,4,4,4,0,4,4,4,4,4,4
960 DATA4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4
970 DATA4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
980 DATA4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
990 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
995 DATA4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
997 DATA2,17
1000 DATA 0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0
1010 DATA 0,0,0,0,0,4,3,1,3,4,3,1,3,4,0,0,0,0,0
1020 DATA 0,0,0,0,0,4,1,3,1,3,1,3,1,4,0,0,0,0,0
1030 DATA 0,0,0,0,0,4,3,1,3,1,3,1,3,4,0,0,0,0,0
1040 DATA 0,0,0,0,0,4,1,3,1,3,1,3,1,4,0,0,0,0,0
1050 DATA 0,0,0,0,0,4,3,1,3,1,3,1,3,4,0,0,0,0,0
1060 DATA 0,0,0,0,0,4,4,4,0,0,0,4,4,4,0,0,0,0,0
1070 DATA 0,0,0,0,0,0,0,4,0,0,0,4,0,0,0,0,0,0,0
1080 DATA 0,0,0,4,4,4,4,4,4,0,4,4,4,4,4,4,0,0,0
1090 DATA 0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0
1100 DATA 0,0,0,4,0,2,0,2,0,2,0,2,0,2,0,4,0,0,0
1110 DATA 0,0,0,4,4,0,2,0,2,0,2,0,2,0,2,4,0,0,0
1120 DATA 0,0,0,0,4,2,0,2,0,2,0,2,0,2,0,4,0,0,0
1130 DATA 0,0,0,0,4,0,0,0,2,0,2,0,0,0,0,4,0,0,0
1140 DATA 0,0,0,0,4,0,0,4,4,4,4,4,0,0,0,4,0,0,0
1150 DATA 0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0
1160 DATA 0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,4,0,0,0
1170 DATA 4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
1180 DATA 4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4
1190 DATA 10,14
1200 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1210 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1220 DATA 0,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,0,0,0
1230 DATA 0,0,0,0,4,4,4,4,4,4,4,0,0,4,0,0,0,0,0
1240 DATA 0,0,0,0,4,0,0,0,0,0,2,0,0,4,0,0,0,0,0
1250 DATA 0,0,0,0,4,0,0,0,2,4,4,0,2,4,0,0,0,0,0
1260 DATA 0,0,0,0,4,4,2,4,1,1,1,4,0,4,0,0,0,0,0
1270 DATA 0,0,0,0,0,4,0,2,1,1,1,0,0,4,0,0,0,0,0
1280 DATA 0,0,0,0,0,4,0,4,1,0,1,4,0,4,4,0,0,0,0
1290 DATA 0,0,0,0,0,4,0,0,0,4,0,4,2,0,4,0,0,0,0
1300 DATA 0,0,0,0,0,4,2,0,0,2,0,0,0,0,4,0,0,0,0
1310 DATA 0,0,0,0,0,4,0,0,4,4,4,4,4,4,4,0,0,0,0
1320 DATA 0,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,0
1330 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1340 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1350 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1360 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1370 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1380 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
1390 DATA 12,6