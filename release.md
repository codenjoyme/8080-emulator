2022-01-18
-----------

- [x] Вчера вечером в поисках новых материалов по ЛИКу нашел 
      [крутые наработки по эмулятору на java](http://www.nedopc.org/forum/viewtopic.php?f=90&t=9475").
- [x] Спасибо Lavr за публикацию исходников.
- [x] Базируясь на них перевел проект с Ant+Applet на Jetty+Maven+JNLP+Applet.
- [x] Запустил на нем ROM Лика и игру Клад (не без глюков).
- [x] Описал [по запуску мануал](https://github.com/codenjoyme/8080-emulator#%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F").
- [x] Опубликовал [проект на GitHub](https://github.com/codenjoyme/8080-emulator).
- [x] И поделился [наполеоновскими планами](https://github.com/codenjoyme/8080-emulator#%D0%BF%D0%BB%D0%B0%D0%BD-%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D0%B9).
- [x] [Спасибо всем, кто повлиял на это](https://github.com/codenjoyme/8080-emulator#%D0%B1%D0%BB%D0%B0%D0%B3%D0%BE%D0%B4%D0%B0%D1%80%D0%BD%D0%BE%D1%81%D1%82%D0%B8).


2022-01-21
-----------

Эксперименты с [эмулятором](https://github.com/codenjoyme/8080-emulator/tree/a7b480fd1b963e61a11126813199c8566e1dfb3b) 
  продолжаются. На сегодня он умеет:
- [x] Загружать ROM и RKS из файла (пока что в ручном режиме в сырцах true на 
      false надо сменить).
- [x] При этом можно загружать ПЗУ Лика или Специалиста.
- [x] Игра Клад уже работает без ошибков. Бейсик все еще глючит.
- [x] Появился программный ассемблер/дизассемблер. Он сейчас еще 
      работает не полноценно, т.к. не все команды реализованы (пока что 30% готовности).
- [x] Появились юнит тесты - тестирующие команды процессора.
- [x] Появились интеграционные тесты, тестирующие что будет в результате 
      выполнения 10M тиков на определенной ROM/игре c CPU/экраном (в формате png).
- [x] Постепенно переношу полезные материалы (мануалы, игры) в ресурсы 
      проекта. Этот репозиторий планируется как единое место для всех 
      наработок и контента.
- [x] Код сильно отрефакторен. Удален старый код ZX Spectrum, расширенные 
      команды Z80, фичи, которые пока что не сильно нужны (после переноса 
      на новый модерновый UI фреймворк часть из них верну). Сильно упрощал 
      везде, где только можно. Разделил все GodObjects на компоненты.

2022-01-29
-----------

Обновления в [эмуляторе](https://github.com/codenjoyme/8080-emulator/tree/d05dfe34290c306f6a515c425625b14ce2e54839):
- [x] Все команды мигрированы из старого процедурного стиля в новый OOP.
- [x] Попутно устранены проблемы с флагом P и командой DAA (в этом  
      как оказалось, крылись отличия Z80 и i8080).
- [x] Спасибо [Автору статьи про различия i8080 и Z80](https://webhamster.ru/mytetrashare/index/mtb0/1637215098k115beckd4).
- [x] Спасибо Viktor Pykhonin [за исходники](https://github.com/vpyk/emu80v4/blob/master/src/Cpu8080.cpp) 
      и emu80-дебаггер они очень помогли разобраться в отличиях.
- [x] Спасибо Авторам [тестов команд i8080](https://github.com/begoon/i8080-core) 
      и Begoon за то, что выложил их на своем GitHub вместе с исходниками.
- [x] Спасибо Svofski за чудный [assembler редактор](https://svofski.github.io/pretty-8080-assembler/) 
      благодаря ему я смог адаптировать нерабочие тесты к работе на ЛИКе. Речь про 
      [test.asm](https://github.com/codenjoyme/8080-emulator/blob/d05dfe34290c306f6a515c425625b14ce2e54839/src/main/resources/test/test.asm) 
      и [test.rks](https://github.com/codenjoyme/8080-emulator/blob/d05dfe34290c306f6a515c425625b14ce2e54839/src/main/resources/test/test.rks).
- [x] Итого игра Клад работает до самого последнего призового уровня (раньше 
      не работала), а так же бейсик завелся и предварительно работает.
- [x] Уверен есть еще много косяков связанных с флагами. У меня в очереди 
      жду еще три обширных теста команд i8080. В ближайшем будущем поправим. 
      Тесты [лежат тут](https://github.com/codenjoyme/8080-emulator/tree/d05dfe34290c306f6a515c425625b14ce2e54839/src/main/resources/test).
- [x] Так как разработка ведется через тесты - улучшен фреймворк для написания 
      тестов. Можно ассемблировать-дизассемблировать команды. Можно останаваливать 
      cpu по какому-то указанному в тесте критерию. Можно трейсить 
      выполнение программы. Можно запускать тесты с записанными сценариями 
      нажатых клавиш.
- [x] Исправлена раскладка клавиатуры. Были ошибки.
- [x] Для удобства есть возможность переключаться QWERTY/JCUKENG по 
      переключению раскладки на хостовой машине, или по временно зажатому Ctrl.
- [x] Модификаторы Ctrl, Alt, Shift (и их комбинации) так же обрабатываются - на 
      некоторые клавиши 2, 4, 6, 7 (и другие) с модификаторами "повешаны" 
      дополнительные символы, которые ждешь глядя на современную калавиатуру.
- [x] По хоткеям NUM_PAD(* + -) можно влиять на скорость эмуляции: максимально 
      ускорять, ускорять на 15% и замедлять на 15% соответственно.
- [x] При работе эмулятора в корне создается файлик keys.rec в нем записано 
      когда (тик) какая клавиша была нажата и когда отпущена. Это позволяет 
      записать вручную сценарий, а потом детерминированно его воспроизводить 
      в тестах или как replay.
- [x] По хоткею NUM_PAD(.) можно загружать любой такой replay.
- [x] По хоткею NUM_PAD(/) можно загружать rks/bin/com файлы. При этом эмулятор
      заботливо вобьет в мониторе JXXYY и нажмет Enter.
- [x] Выпилены старые Апплеты, запуск приложения заменен на Swing.
- [x] Добавлены скрипты build/build-client.sh для запуска десктопной версии, 
      и build/build-server.sh чтобы поднять jetty и раздавать это же приложение в сети.
- [x] Добавлены найденные на просторах сети игры ЛИКа и тексты.

2023-09-09
-----------
- [ ] В JNLP формате не работают хоткеи так же как в обычной версии.
- [x] Разделены тесты CpuTest, CpuPerformanceTest, CpuSmokeTest.
- [x] Выделена документация по командам процессора.

2023-09-10
-----------
- [x] Добавлены тесты на команды процессора 8080.
- [x] Добавлен более удобный тестовый метод для тестирования изменений в памяти.
- [x] Добавлен GPT generated dirty класс, который позволяет быстро по отчету о сваленных 
      тестах jUnit (из Intellij Idea) выкусить actual блок и заменить expected 
      по всему исходнику java класса теста. Очень удобно. Давно пора это в IDE добавить 
      как фичу.  

...

2024-12-06
-----------
- [x] (033e1d34) Теперь тест js версии ассемблера генерируют контент для всех тестов процессора. 
- [x] (7009ba58) Теперь тест java версии ассемблера использует тот же контент, что и js версия для всех тестов процессора. 
- [x] (5262f92f) Исправление ошибки в java ассемблере связанной с неправильной обработкой чисел в формате `0b_1111_1111`.
      в методе `resolveNumber`. 
- [x] (cd2a4802) Исправление в js/java версиях ассемблера в области парсинга разных форматов чисел `resolveNumber`.
      Это отступление от оригинальной вресии js ассемблера было необходимо, так как java версия `evalInvoke` не 
      работает с некоторыми форматами чисел, так как это делает js версия. 
- [x] (27b3fae7) Тест ассемблера `AssemblerTest.assemble()` теперь генерирует `mem` файлы тестов процессора 
      из исходников. Все они соответсвуют оригинальным версиям, о чем можно сделать вывод, что ассемблер работает.
- [x] (c51579d2) В `Bites` появился метод `byteArray` позволяющий получить память в виде массива байтов, что  
      используется теперь в асемблере для удобства.  
- [x] (c7d0080a) `Bites` теперь может печатать содержимое памяти в виде таблицы.
- [x] (c7d0080a) Для нового ассемблера добавлена документация по использованию, тест и `Assembler.main()` ззапускатор.
- [x] (ec138614) Обновил в шапке релизы ассемблера.
      Rev.K2: Ported to Java by Oleksandr Baglai
      Rev.K3: Fixed resolveNumber for processing numbers with '_' in them.
              Fixed corner cases with '0b' prefix in combination with 'h' suffix.
- [x] (8818a6d1) Реализован функционал генерации wave файлов на основе нового ассемблера. 
- [x] (8818a6d1) Добавлены тесты на генерацию wave файлов для всех тестов процессора.
- [x] (1914f442) Исправлена частота дискретизации wave чтобы было близко к тому, как оно в оригинале должно звучать.
- [x] (1914f442) Добавлены тесты на генерацию wave файлов для игры `клад`, исправлены wave файлы всех тестов процессора.
- [x] (c072c39e) Так как в играх появляются дополнительные артефакты кроме самой скопилированной версии, 
      было разделение - каждая игра имеет свою папку с файлами.
- [x] (15f2c737) Добавлена в тесте `testLik_generateWave` генерация всех wave файлов для всех игр ЛИКа.
- [x] (ce6bfe72) В `FileAssert` если файл уже существует, и его хеша нет в кеше, то он пересчитывается. Так как 
      не все тесты подчищают за собой перед своим запуском, это позволяет не падать на тестах,

2024-12-07
-----------
- [x] (c77afbdf) Каждый интеграционный тест теперь пишет approvals контент в папку, которая берется из имени теста. 
      Каждый прочерк заменяется на слеш. Сделано для удобства отладки растущего количества тестов.
- [x] (c77afbdf) В `TrackUpdatedMemorу` добавлена возможность отслеживать изменения только тех даных, что реально поменялись, 
      или всех записываемых. 
- [x] (bfad2f98) В прошлых коммитах потерялись другие тесты. Докоммитил. 
- [x] (883a4221) Добавлены тесты для ассемблирования и дизассемблирования (были уже) игры после того как в нее поиграли, 
      с проследующей проверкой как именно изменилась игра (где ее блоки данных в памяти).
- [x] (883a4221) В `TrackUpdatedMemorу` так же скипаются строчки для 16 байтовых блоков, которые не поменялись.   
- [x] (20b019c0) Исправлено расширение файла на `log`, так как `diff` зарезервировано в IDE.
- [x] (6f466ad5) Исправлена информация про изменения в проекте, а так же в бклоге.
- [x] (972082dc) Рефакторинг. Устранено дублирование в `Bits`.
- [x] (7fa9bac0) `PngVideo` работает в любом диапазоне дат, это необходимо для того, чтобы иметь возможность 
      распечатать как бы выглядела любая область памяти, будь она video memory. Эта возможность пригодится 
      в тестах дальше, чтобы быстро визуально понимать - что поменялось.
- [x] (684e580c) Уточнена связь между диапазоном видео памяти и шириной и высотой экрана.
- [x] (25ddecc9) Реализован метод печатающий в png заданной высота Range из памяти - это полезно для отладки.
      При этом пришлось переработать логику отрисовки видеопамяти.
- [x] (c99ef89f) Исправил ошибку с загрузкой игры через диалог загрузки. Из за недавних исправлений в (925298d1)
      появилась ошибка.
- [x] (3e1c25cc) Добавлена информация о том, как работать с клавишами для упраления эмулятором. 
- [x] (8ebfbb6f) Добавлено логгирование разных важных этапов, для удобства отладки. 
- [x] (b352cd13) Добавлена возможность останавливать recording скрипт командой `stop();` или по нажатию `Pause/Break`. 
- [x] (e95ab927) Нажатие на клавишу `NumPad 3` - создает скринотшот в папке `screenshots` с именем содержащим текущую дату.
- [x] (--------) Нажатие на клавишу `NumPad 4` - останавливает воспроизведение/запись replay.
- [x] (--------) 

Продолжение следует!